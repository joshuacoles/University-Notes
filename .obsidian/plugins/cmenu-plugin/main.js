/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

const icons = {
    cMenuAdd: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="white" stroke-width="0" stroke-linecap="round" stroke-linejoin="round"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4z" fill="white"/><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10s10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8s8 3.589 8 8s-3.589 8-8 8z" fill="white"/></svg>`,
    cMenuDelete: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="white" stroke-width="0" stroke-linecap="round" stroke-linejoin="round"><path d="M5 20a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8h2V6h-4V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2H3v2h2zM9 4h6v2H9zM8 8h9v12H7V8z" fill="white"/><path d="M9 10h2v8H9zm4 0h2v8h-2z" fill="white"/></svg>`,
    "codeblock-glyph": `<svg xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-width="2" d="M9 22l6-20m2 15l5-5l-5-5M7 17l-5-5l5-5"/></svg>`,
    "underline-glyph": `<svg xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 1024 1024"><path fill="currentColor" d="M824 804H200c-4.4 0-8 3.4-8 7.6v60.8c0 4.2 3.6 7.6 8 7.6h624c4.4 0 8-3.4 8-7.6v-60.8c0-4.2-3.6-7.6-8-7.6zm-312-76c69.4 0 134.6-27.1 183.8-76.2C745 602.7 772 537.4 772 468V156c0-6.6-5.4-12-12-12h-60c-6.6 0-12 5.4-12 12v312c0 97-79 176-176 176s-176-79-176-176V156c0-6.6-5.4-12-12-12h-60c-6.6 0-12 5.4-12 12v312c0 69.4 27.1 134.6 76.2 183.8C377.3 701 442.6 728 512 728z"/></svg>`,
    "superscript-glyph": `<svg xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path fill="currentColor"d="M16 7.41L11.41 12L16 16.59L14.59 18L10 13.41L5.41 18L4 16.59L8.59 12L4 7.41L5.41 6L10 10.59L14.59 6L16 7.41M21.85 9h-4.88V8l.89-.82c.76-.64 1.32-1.18 1.7-1.63c.37-.44.56-.85.57-1.23a.884.884 0 0 0-.27-.7c-.18-.19-.47-.28-.86-.29c-.31.01-.58.07-.84.17l-.66.39l-.45-1.17c.27-.22.59-.39.98-.53S18.85 2 19.32 2c.78 0 1.38.2 1.78.61c.4.39.62.93.62 1.57c-.01.56-.19 1.08-.54 1.55c-.34.48-.76.93-1.27 1.36l-.64.52v.02h2.58V9z"/></svg>`,
    "subscript-glyph": `<svg xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7.41L11.41 12L16 16.59L14.59 18L10 13.41L5.41 18L4 16.59L8.59 12L4 7.41L5.41 6L10 10.59L14.59 6L16 7.41m5.85 13.62h-4.88v-1l.89-.8c.76-.65 1.32-1.19 1.7-1.63c.37-.44.56-.85.57-1.24a.898.898 0 0 0-.27-.7c-.18-.16-.47-.28-.86-.28c-.31 0-.58.06-.84.18l-.66.38l-.45-1.17c.27-.21.59-.39.98-.53s.82-.24 1.29-.24c.78.04 1.38.25 1.78.66c.4.41.62.93.62 1.57c-.01.56-.19 1.08-.54 1.55c-.34.47-.76.92-1.27 1.36l-.64.52v.02h2.58v1.35z"/></svg>`,
};
function addIcons() {
    Object.keys(icons).forEach((key) => {
        obsidian.addIcon(key, icons[key]);
    });
}

function selfDestruct() {
    let cMenuModalBar = document.getElementById("cMenuModalBar");
    if (cMenuModalBar) {
        if (cMenuModalBar.firstChild) {
            cMenuModalBar.removeChild(cMenuModalBar.firstChild);
        }
        cMenuModalBar.remove();
    }
}
function cMenuPopover(app, settings) {
    function createMenu() {
        const generateMenu = () => {
            var cMenu = createEl("div");
            cMenu.setAttribute("id", "cMenuModalBar");
            settings.aestheticStyle == "default"
                ? cMenu.addClass("cMenuDefaultAesthetic")
                : cMenu.addClass("cMenuGlassAesthetic");
            settings.appendMethod == "workspace"
                ? document.body
                    .querySelector(".mod-vertical.mod-root")
                    .insertAdjacentElement("afterbegin", cMenu)
                : document.body.appendChild(cMenu);
            settings.menuCommands.forEach((item) => {
                var button = new obsidian.ButtonComponent(cMenu);
                button
                    .setIcon(item.icon)
                    .setClass("cMenuCommandItem")
                    .setTooltip(item.name)
                    .onClick((_) => {
                    //@ts-ignore
                    app.commands.executeCommandById(item.id);
                });
            });
        };
        if (app.workspace.getActiveViewOfType(obsidian.MarkdownView)) {
            var cMenuModalBar = document.getElementById("cMenuModalBar");
            if (cMenuModalBar) {
                return;
            }
            else {
                generateMenu();
                let cMenuModalBar = document.getElementById("cMenuModalBar");
                cMenuModalBar.childElementCount >= 9
                    ? cMenuModalBar.addClass("cMenuGrid")
                    : cMenuModalBar.addClass("cMenuFlex");
                var clientWidth = document.getElementById("cMenuModalBar").offsetWidth;
                cMenuModalBar.setAttribute("style", `left: calc(50% - calc(${clientWidth}px / 2));`);
            }
        }
        else {
            selfDestruct();
        }
    }
    createMenu();
}

const appIcons = [
    // from obsidian app.js file
    "add-note-glyph",
    "any-key",
    "audio-file",
    "blocks",
    "bold-glyph",
    "box-glyph",
    "bracket-glyph",
    "broken-link",
    "bullet-list-glyph",
    "bullet-list",
    "calendar-glyph",
    "calendar-with-checkmark",
    "check-in-circle",
    "check-small",
    "checkbox-glyph",
    "checkmark",
    "clock-glyph",
    "clock",
    "cloud",
    "code-glyph",
    "command-glyph",
    "compress-glyph",
    "create-new",
    "cross-in-box",
    "cross",
    "crossed-star",
    "csv",
    "deleteColumn",
    "deleteRow",
    "dice-glyph",
    "dice",
    "document",
    "documents",
    "dot-network",
    "double-down-arrow-glyph",
    "double-up-arrow-glyph",
    "down-arrow-with-tail",
    "down-chevron-glyph",
    "down-curly-arrow-glyph",
    "duplicate-glyph",
    "enlarge-glyph",
    "enter",
    "exit-fullscreen",
    "expand-vertically",
    "file-explorer-glyph",
    "filled-pin",
    "formula",
    "folder",
    "forward-arrow",
    "fullscreen",
    "gear",
    "go-to-file",
    "graph-glyph",
    "hashtag",
    "heading-glyph",
    "help",
    "highlight-glyph",
    "horizontal-split",
    "image-file",
    "image-glyph",
    "import-glyph",
    "indent-glyph",
    "info",
    "insertColumn",
    "insertRow",
    "install",
    "italic-glyph",
    "keyboard-glyph",
    "languages",
    "left-arrow-with-tail",
    "left-arrow",
    "left-chevron-glyph",
    "lines-of-text",
    "link-glyph",
    "link",
    "links-coming-in",
    "links-going-out",
    "logo-crystal",
    "magnifying-glass",
    "merge-files-glyph",
    "merge-files",
    "microphone-filled",
    "microphone",
    "minus-with-circle",
    "moveColumnLeft",
    "moveColumnRight",
    "moveRowDown",
    "moveRowUp",
    "navigate-glyph",
    "note-glyph",
    "number-list-glyph",
    "open-elsewhere-glyph",
    "open-vault",
    "pane-layout",
    "paper-plane-glyph",
    "paper-plane",
    "paste-text",
    "paste",
    "paused",
    "pdf-file",
    "pencil",
    "percent-sign-glyph",
    "pin",
    "play-audio-glyph",
    "plus-minus-glyph",
    "plus-with-circle",
    "popup-open",
    "presentation-glyph",
    "presentation",
    "price-tag-glyph",
    "question-mark-glyph",
    "quote-glyph",
    "redo-glyph",
    "reset",
    "restore-file-glyph",
    "right-arrow-with-tail",
    "right-arrow",
    "right-chevron-glyph",
    "right-triangle",
    "run-command",
    "scissors-glyph",
    "scissors",
    "search-glyph",
    "search",
    "select-all-text",
    "sheets-in-box",
    "sortAsc",
    "sortDesc",
    "spreadsheet",
    "split",
    "stacked-levels",
    "star-glyph",
    "star-list",
    "star",
    "stop-audio-glyph",
    "strikethrough-glyph",
    "switch",
    "sync-small",
    "sync",
    "tag-glyph",
    "three-horizontal-bars",
    "tomorrow-glyph",
    "trash",
    "two-blank-pages",
    "undo-glyph",
    "unindent-glyph",
    "up-and-down-arrows",
    "up-arrow-with-tail",
    "up-chevron-glyph",
    "up-curly-arrow-glyph",
    "uppercase-lowercase-a",
    "vault",
    "vertical-split",
    "vertical-three-dots",
    "workspace-glyph",
    "wrench-screwdriver-glyph",
    "yesterday-glyph",
];

class ChooseFromIconList extends obsidian.FuzzySuggestModal {
    constructor(plugin, command) {
        super(plugin.app);
        this.plugin = plugin;
        this.command = command;
        this.setPlaceholder("Choose from icon list");
    }
    getItems() {
        return appIcons;
    }
    getItemText(item) {
        return item;
    }
    renderSuggestion(icon, iconItem) {
        const span = createSpan({ cls: "cMenuIconPick" });
        iconItem.appendChild(span);
        obsidian.setIcon(span, icon.item);
        super.renderSuggestion(icon, iconItem);
    }
    onChooseItem(item) {
        return __awaiter(this, void 0, void 0, function* () {
            this.command.icon = item;
            this.plugin.settings.menuCommands.push(this.command);
            yield this.plugin.saveSettings();
            setTimeout(() => {
                dispatchEvent(new Event("cMenu-NewCommand"));
            }, 100);
            console.log(`%cCommand '${this.command.name}' was added to cMenu`, "color: #17ff74");
        });
    }
}
class CommandPicker extends obsidian.FuzzySuggestModal {
    constructor(plugin) {
        super(plugin.app);
        this.plugin = plugin;
        this.app;
        this.setPlaceholder("Choose from commands list");
    }
    getItems() {
        //@ts-ignore
        return this.app.commands.listCommands();
    }
    getItemText(item) {
        return item.name;
    }
    onChooseItem(item) {
        return __awaiter(this, void 0, void 0, function* () {
            if (item.icon) {
                this.plugin.settings.menuCommands.push(item);
                yield this.plugin.saveSettings();
                setTimeout(() => {
                    dispatchEvent(new Event("cMenu-NewCommand"));
                }, 100);
                console.log(`%cCommand '${item.name}' was added to cMenu`, "color: #17ff74");
            }
            else {
                new ChooseFromIconList(this.plugin, item).open();
            }
        });
    }
}

const APPEND_METHODS = ["body", "workspace"];
const AESTHETIC_STYLES = ["glass", "default"];
const DEFAULT_SETTINGS = {
    aestheticStyle: "default",
    menuCommands: [
        {
            id: "editor:toggle-bold",
            name: "Toggle bold",
            icon: "bold-glyph",
        },
        {
            id: "editor:toggle-italics",
            name: "Toggle italics",
            icon: "italic-glyph",
        },
        {
            id: "editor:toggle-strikethrough",
            name: "Toggle strikethrough",
            icon: "strikethrough-glyph",
        },
        {
            id: "cmenu-plugin:underline",
            name: "cMenu: Toggle Underline",
            icon: "underline-glyph",
        },
        {
            id: "cmenu-plugin:superscript",
            name: "cMenu: Toggle Superscript",
            icon: "superscript-glyph",
        },
        {
            id: "cmenu-plugin:subscript",
            name: "cMenu: Toggle Subscript",
            icon: "subscript-glyph",
        },
        {
            id: "editor:toggle-code",
            name: "Toggle code",
            icon: "code-glyph",
        },
        {
            id: "cmenu-plugin:codeblock",
            name: "cMenu: Toggle codeblock",
            icon: "codeblock-glyph",
        },
        {
            id: "editor:toggle-blockquote",
            name: "Toggle blockquote",
            icon: "quote-glyph",
        },
    ],
    gridItems: "1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr",
    appendMethod: "workspace",
};
class cMenuSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
        addEventListener("cMenu-NewCommand", () => {
            this.display();
        });
    }
    display() {
        const { containerEl } = this;
        containerEl.empty();
        containerEl.createEl("h2", { text: "cMenu Settings" });
        new obsidian.Setting(containerEl)
            .setName("Customize cMenu append method.")
            .setDesc("Choose where cMenu will append upon regeneration.")
            .addDropdown((dropdown) => {
            let methods = {};
            APPEND_METHODS.map((method) => (methods[method] = method));
            dropdown.addOptions(methods);
            dropdown
                .setValue(this.plugin.settings.appendMethod)
                .onChange((appendMethod) => {
                this.plugin.settings.appendMethod = appendMethod;
                this.plugin.saveSettings();
            });
        });
        new obsidian.Setting(containerEl)
            .setName("Customize cMenu aesthetic.")
            .setDesc("Choose between a glass morphism and default style for cMenu.")
            .addDropdown((dropdown) => {
            let aesthetics = {};
            AESTHETIC_STYLES.map((aesthetic) => (aesthetics[aesthetic] = aesthetic));
            dropdown.addOptions(aesthetics);
            dropdown
                .setValue(this.plugin.settings.aestheticStyle)
                .onChange((aestheticStyle) => {
                this.plugin.settings.aestheticStyle = aestheticStyle;
                this.plugin.saveSettings();
            });
        });
        new obsidian.Setting(containerEl)
            .setName("Customize cMenu Commands")
            .setDesc("Add a command from Obsidian's commands library to cMenu. By default, your commands are set to: Toggle bold, Toggle italics, Toggle strikethrough, cMenu: Toggle Underline, cMenu: Toggle Superscript, cMenu: Toggle Subscript, Toggle code, cMenu: Toggle codeblock, and Toggle blockquote.")
            .addButton((addButton) => {
            addButton
                .setIcon("cMenuAdd")
                .setClass("cMenuSettingsButton")
                .setClass("cMenuSettingsButtonAdd")
                .onClick(() => {
                new CommandPicker(this.plugin).open();
            });
        });
        this.plugin.settings.menuCommands.forEach((newCommand) => {
            const setting = new obsidian.Setting(containerEl)
                .setName(newCommand.name)
                .addButton((deleteButton) => {
                deleteButton
                    .setIcon("cMenuDelete")
                    .setClass("cMenuSettingsButton")
                    .setClass("cMenuSettingsButtonDelete")
                    .onClick(() => __awaiter(this, void 0, void 0, function* () {
                    this.plugin.settings.menuCommands.remove(newCommand);
                    yield this.plugin.saveSettings();
                    this.display();
                    console.log(`%cCommand '${newCommand.name}' was removed from cMenu`, "color: #ff2360");
                }));
            });
            setting.nameEl;
        });
        const div = containerEl.createEl("div", {
            cls: "cDonationSection",
        });
        const credit = createEl("p");
        const donateText = createEl("p");
        donateText.appendText("If you like this Plugin and are considering donating to support continued development, use the button below!");
        credit.appendText("Created with ❤️ by Chetachi");
        credit.setAttribute("style", "color: var(--text-muted)");
        div.appendChild(donateText);
        div.appendChild(credit);
        div.appendChild(createDonateButton("https://www.buymeacoffee.com/chetachi"));
    }
    save() {
        this.plugin.saveSettings();
    }
}
const createDonateButton = (link) => {
    const a = createEl("a");
    a.setAttribute("href", link);
    a.addClass("buymeacoffee-chetachi-img");
    a.innerHTML = `<img src="https://img.buymeacoffee.com/button-api/?text=Buy me a coffee&emoji=&slug=chetachi&button_colour=e3e7ef&font_colour=262626&font_family=Inter&outline_colour=262626&coffee_colour=ff0000" height="42px">`;
    return a;
};

class cMenuPlugin extends obsidian.Plugin {
    constructor() {
        super(...arguments);
        this.handlecMenu = () => {
            cMenuPopover(this.app, this.settings);
        };
    }
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            console.log("cMenu v" + this.manifest.version + " loaded");
            yield this.loadSettings();
            addIcons();
            this.addCommand({
                id: "underline",
                name: "Toggle Underline",
                icon: "underline-glyph",
                callback: () => __awaiter(this, void 0, void 0, function* () {
                    var activeLeaf = this.app.workspace.getActiveViewOfType(obsidian.MarkdownView);
                    if (activeLeaf) {
                        var view = activeLeaf;
                        var editor = view.editor;
                        var selection = editor.getSelection();
                        if (selection) {
                            editor.replaceSelection("<u>" + selection + "</u>");
                        }
                        else {
                            return;
                        }
                    }
                }),
            });
            this.addCommand({
                id: "superscript",
                name: "Toggle Superscript",
                icon: "superscript-glyph",
                callback: () => __awaiter(this, void 0, void 0, function* () {
                    var activeLeaf = this.app.workspace.getActiveViewOfType(obsidian.MarkdownView);
                    if (activeLeaf) {
                        var view = activeLeaf;
                        var editor = view.editor;
                        var selection = editor.getSelection();
                        if (selection) {
                            editor.replaceSelection("<sup>" + selection + "</sup>");
                        }
                        else {
                            return;
                        }
                    }
                }),
            });
            this.addCommand({
                id: "subscript",
                name: "Toggle Subscript",
                icon: "subscript-glyph",
                callback: () => __awaiter(this, void 0, void 0, function* () {
                    var activeLeaf = this.app.workspace.getActiveViewOfType(obsidian.MarkdownView);
                    if (activeLeaf) {
                        var view = activeLeaf;
                        var editor = view.editor;
                        var selection = editor.getSelection();
                        if (selection) {
                            editor.replaceSelection("<sub>" + selection + "</sub>");
                        }
                        else {
                            return;
                        }
                    }
                }),
            });
            this.addCommand({
                id: "codeblock",
                name: "Toggle codeblock",
                icon: "codeblock-glyph",
                callback: () => __awaiter(this, void 0, void 0, function* () {
                    var activeLeaf = this.app.workspace.getActiveViewOfType(obsidian.MarkdownView);
                    if (activeLeaf) {
                        var view = activeLeaf;
                        var editor = view.editor;
                        var selection = editor.getSelection();
                        if (selection) {
                            editor.replaceSelection("\n```\n" + selection + "\n```\n");
                        }
                        else {
                            return;
                        }
                    }
                }),
            });
            this.addSettingTab(new cMenuSettingTab(this.app, this));
            this.registerEvent(this.app.workspace.on("active-leaf-change", this.handlecMenu));
        });
    }
    onunload() {
        selfDestruct();
        console.log("cMenu unloaded");
        this.app.workspace.off("active-leaf-change", this.handlecMenu);
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
        });
    }
}

module.exports = cMenuPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInNyYy9jdXN0b21JY29ucy50cyIsInNyYy9tZW51LnRzIiwic3JjL2FwcEljb25zLnRzIiwic3JjL21vZGFscy50cyIsInNyYy9zZXR0aW5ncy50cyIsIm1haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBmcm9tKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xyXG59XHJcbiIsImltcG9ydCB7IGFkZEljb24gfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuY29uc3QgaWNvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIGNNZW51QWRkOiBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cIndoaXRlXCIgc3Ryb2tlLXdpZHRoPVwiMFwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPjxwYXRoIGQ9XCJNMTMgN2gtMnY0SDd2Mmg0djRoMnYtNGg0di0yaC00elwiIGZpbGw9XCJ3aGl0ZVwiLz48cGF0aCBkPVwiTTEyIDJDNi40ODYgMiAyIDYuNDg2IDIgMTJzNC40ODYgMTAgMTAgMTBzMTAtNC40ODYgMTAtMTBTMTcuNTE0IDIgMTIgMnptMCAxOGMtNC40MTEgMC04LTMuNTg5LTgtOHMzLjU4OS04IDgtOHM4IDMuNTg5IDggOHMtMy41ODkgOC04IDh6XCIgZmlsbD1cIndoaXRlXCIvPjwvc3ZnPmAsXG4gIGNNZW51RGVsZXRlOiBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cIndoaXRlXCIgc3Ryb2tlLXdpZHRoPVwiMFwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPjxwYXRoIGQ9XCJNNSAyMGEyIDIgMCAwIDAgMiAyaDEwYTIgMiAwIDAgMCAyLTJWOGgyVjZoLTRWNGEyIDIgMCAwIDAtMi0ySDlhMiAyIDAgMCAwLTIgMnYySDN2Mmgyek05IDRoNnYySDl6TTggOGg5djEySDdWOHpcIiBmaWxsPVwid2hpdGVcIi8+PHBhdGggZD1cIk05IDEwaDJ2OEg5em00IDBoMnY4aC0yelwiIGZpbGw9XCJ3aGl0ZVwiLz48L3N2Zz5gLFxuICBcImNvZGVibG9jay1nbHlwaFwiOiBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPjxwYXRoIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIGQ9XCJNOSAyMmw2LTIwbTIgMTVsNS01bC01LTVNNyAxN2wtNS01bDUtNVwiLz48L3N2Zz5gLFxuICBcInVuZGVybGluZS1nbHlwaFwiOiBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgdmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIj48cGF0aCBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk04MjQgODA0SDIwMGMtNC40IDAtOCAzLjQtOCA3LjZ2NjAuOGMwIDQuMiAzLjYgNy42IDggNy42aDYyNGM0LjQgMCA4LTMuNCA4LTcuNnYtNjAuOGMwLTQuMi0zLjYtNy42LTgtNy42em0tMzEyLTc2YzY5LjQgMCAxMzQuNi0yNy4xIDE4My44LTc2LjJDNzQ1IDYwMi43IDc3MiA1MzcuNCA3NzIgNDY4VjE1NmMwLTYuNi01LjQtMTItMTItMTJoLTYwYy02LjYgMC0xMiA1LjQtMTIgMTJ2MzEyYzAgOTctNzkgMTc2LTE3NiAxNzZzLTE3Ni03OS0xNzYtMTc2VjE1NmMwLTYuNi01LjQtMTItMTItMTJoLTYwYy02LjYgMC0xMiA1LjQtMTIgMTJ2MzEyYzAgNjkuNCAyNy4xIDEzNC42IDc2LjIgMTgzLjhDMzc3LjMgNzAxIDQ0Mi42IDcyOCA1MTIgNzI4elwiLz48L3N2Zz5gLFxuICBcInN1cGVyc2NyaXB0LWdseXBoXCI6IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+PHBhdGggZmlsbD1cImN1cnJlbnRDb2xvclwiZD1cIk0xNiA3LjQxTDExLjQxIDEyTDE2IDE2LjU5TDE0LjU5IDE4TDEwIDEzLjQxTDUuNDEgMThMNCAxNi41OUw4LjU5IDEyTDQgNy40MUw1LjQxIDZMMTAgMTAuNTlMMTQuNTkgNkwxNiA3LjQxTTIxLjg1IDloLTQuODhWOGwuODktLjgyYy43Ni0uNjQgMS4zMi0xLjE4IDEuNy0xLjYzYy4zNy0uNDQuNTYtLjg1LjU3LTEuMjNhLjg4NC44ODQgMCAwIDAtLjI3LS43Yy0uMTgtLjE5LS40Ny0uMjgtLjg2LS4yOWMtLjMxLjAxLS41OC4wNy0uODQuMTdsLS42Ni4zOWwtLjQ1LTEuMTdjLjI3LS4yMi41OS0uMzkuOTgtLjUzUzE4Ljg1IDIgMTkuMzIgMmMuNzggMCAxLjM4LjIgMS43OC42MWMuNC4zOS42Mi45My42MiAxLjU3Yy0uMDEuNTYtLjE5IDEuMDgtLjU0IDEuNTVjLS4zNC40OC0uNzYuOTMtMS4yNyAxLjM2bC0uNjQuNTJ2LjAyaDIuNThWOXpcIi8+PC9zdmc+YCxcbiAgXCJzdWJzY3JpcHQtZ2x5cGhcIjogYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48cGF0aCBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk0xNiA3LjQxTDExLjQxIDEyTDE2IDE2LjU5TDE0LjU5IDE4TDEwIDEzLjQxTDUuNDEgMThMNCAxNi41OUw4LjU5IDEyTDQgNy40MUw1LjQxIDZMMTAgMTAuNTlMMTQuNTkgNkwxNiA3LjQxbTUuODUgMTMuNjJoLTQuODh2LTFsLjg5LS44Yy43Ni0uNjUgMS4zMi0xLjE5IDEuNy0xLjYzYy4zNy0uNDQuNTYtLjg1LjU3LTEuMjRhLjg5OC44OTggMCAwIDAtLjI3LS43Yy0uMTgtLjE2LS40Ny0uMjgtLjg2LS4yOGMtLjMxIDAtLjU4LjA2LS44NC4xOGwtLjY2LjM4bC0uNDUtMS4xN2MuMjctLjIxLjU5LS4zOS45OC0uNTNzLjgyLS4yNCAxLjI5LS4yNGMuNzguMDQgMS4zOC4yNSAxLjc4LjY2Yy40LjQxLjYyLjkzLjYyIDEuNTdjLS4wMS41Ni0uMTkgMS4wOC0uNTQgMS41NWMtLjM0LjQ3LS43Ni45Mi0xLjI3IDEuMzZsLS42NC41MnYuMDJoMi41OHYxLjM1elwiLz48L3N2Zz5gLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWRkSWNvbnMoKSB7XG4gIE9iamVjdC5rZXlzKGljb25zKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBhZGRJY29uKGtleSwgaWNvbnNba2V5XSk7XG4gIH0pO1xufVxuIiwiaW1wb3J0IHsgQXBwLCBDb21tYW5kLCBNYXJrZG93blZpZXcsIEJ1dHRvbkNvbXBvbmVudCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgY01lbnVTZXR0aW5ncyB9IGZyb20gXCJzcmMvc2V0dGluZ3NcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHNlbGZEZXN0cnVjdCgpIHtcbiAgbGV0IGNNZW51TW9kYWxCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNNZW51TW9kYWxCYXJcIik7XG4gIGlmIChjTWVudU1vZGFsQmFyKSB7XG4gICAgaWYgKGNNZW51TW9kYWxCYXIuZmlyc3RDaGlsZCkge1xuICAgICAgY01lbnVNb2RhbEJhci5yZW1vdmVDaGlsZChjTWVudU1vZGFsQmFyLmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICBjTWVudU1vZGFsQmFyLnJlbW92ZSgpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjTWVudVBvcG92ZXIoYXBwOiBBcHAsIHNldHRpbmdzOiBjTWVudVNldHRpbmdzKTogdm9pZCB7XG4gIGZ1bmN0aW9uIGNyZWF0ZU1lbnUoKSB7XG4gICAgY29uc3QgZ2VuZXJhdGVNZW51ID0gKCkgPT4ge1xuICAgICAgdmFyIGNNZW51ID0gY3JlYXRlRWwoXCJkaXZcIik7XG4gICAgICBjTWVudS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImNNZW51TW9kYWxCYXJcIik7XG5cbiAgICAgIHNldHRpbmdzLmFlc3RoZXRpY1N0eWxlID09IFwiZGVmYXVsdFwiXG4gICAgICAgID8gY01lbnUuYWRkQ2xhc3MoXCJjTWVudURlZmF1bHRBZXN0aGV0aWNcIilcbiAgICAgICAgOiBjTWVudS5hZGRDbGFzcyhcImNNZW51R2xhc3NBZXN0aGV0aWNcIik7XG5cbiAgICAgIHNldHRpbmdzLmFwcGVuZE1ldGhvZCA9PSBcIndvcmtzcGFjZVwiXG4gICAgICAgID8gZG9jdW1lbnQuYm9keVxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIubW9kLXZlcnRpY2FsLm1vZC1yb290XCIpXG4gICAgICAgICAgICAuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJiZWdpblwiLCBjTWVudSlcbiAgICAgICAgOiBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNNZW51KTtcblxuICAgICAgc2V0dGluZ3MubWVudUNvbW1hbmRzLmZvckVhY2goKGl0ZW06IENvbW1hbmQpID0+IHtcbiAgICAgICAgdmFyIGJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQoY01lbnUpO1xuICAgICAgICBidXR0b25cbiAgICAgICAgICAuc2V0SWNvbihpdGVtLmljb24pXG4gICAgICAgICAgLnNldENsYXNzKFwiY01lbnVDb21tYW5kSXRlbVwiKVxuICAgICAgICAgIC5zZXRUb29sdGlwKGl0ZW0ubmFtZSlcbiAgICAgICAgICAub25DbGljaygoXykgPT4ge1xuICAgICAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgICAgICBhcHAuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKGl0ZW0uaWQpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGlmIChhcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KSkge1xuICAgICAgdmFyIGNNZW51TW9kYWxCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNNZW51TW9kYWxCYXJcIik7XG4gICAgICBpZiAoY01lbnVNb2RhbEJhcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZW5lcmF0ZU1lbnUoKTtcbiAgICAgICAgbGV0IGNNZW51TW9kYWxCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNNZW51TW9kYWxCYXJcIik7XG4gICAgICAgIGNNZW51TW9kYWxCYXIuY2hpbGRFbGVtZW50Q291bnQgPj0gOVxuICAgICAgICAgID8gY01lbnVNb2RhbEJhci5hZGRDbGFzcyhcImNNZW51R3JpZFwiKVxuICAgICAgICAgIDogY01lbnVNb2RhbEJhci5hZGRDbGFzcyhcImNNZW51RmxleFwiKTtcbiAgICAgICAgdmFyIGNsaWVudFdpZHRoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjTWVudU1vZGFsQmFyXCIpLm9mZnNldFdpZHRoO1xuXG4gICAgICAgIGNNZW51TW9kYWxCYXIuc2V0QXR0cmlidXRlKFxuICAgICAgICAgIFwic3R5bGVcIixcbiAgICAgICAgICBgbGVmdDogY2FsYyg1MCUgLSBjYWxjKCR7Y2xpZW50V2lkdGh9cHggLyAyKSk7YFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmRGVzdHJ1Y3QoKTtcbiAgICB9XG4gIH1cbiAgY3JlYXRlTWVudSgpO1xufVxuIiwiZXhwb3J0IGNvbnN0IGFwcEljb25zOiBzdHJpbmdbXSA9IFtcbiAgLy8gZnJvbSBvYnNpZGlhbiBhcHAuanMgZmlsZVxuICBcImFkZC1ub3RlLWdseXBoXCIsXG4gIFwiYW55LWtleVwiLFxuICBcImF1ZGlvLWZpbGVcIixcbiAgXCJibG9ja3NcIixcbiAgXCJib2xkLWdseXBoXCIsXG4gIFwiYm94LWdseXBoXCIsXG4gIFwiYnJhY2tldC1nbHlwaFwiLFxuICBcImJyb2tlbi1saW5rXCIsXG4gIFwiYnVsbGV0LWxpc3QtZ2x5cGhcIixcbiAgXCJidWxsZXQtbGlzdFwiLFxuICBcImNhbGVuZGFyLWdseXBoXCIsXG4gIFwiY2FsZW5kYXItd2l0aC1jaGVja21hcmtcIixcbiAgXCJjaGVjay1pbi1jaXJjbGVcIixcbiAgXCJjaGVjay1zbWFsbFwiLFxuICBcImNoZWNrYm94LWdseXBoXCIsXG4gIFwiY2hlY2ttYXJrXCIsXG4gIFwiY2xvY2stZ2x5cGhcIixcbiAgXCJjbG9ja1wiLFxuICBcImNsb3VkXCIsXG4gIFwiY29kZS1nbHlwaFwiLFxuICBcImNvbW1hbmQtZ2x5cGhcIixcbiAgXCJjb21wcmVzcy1nbHlwaFwiLFxuICBcImNyZWF0ZS1uZXdcIixcbiAgXCJjcm9zcy1pbi1ib3hcIixcbiAgXCJjcm9zc1wiLFxuICBcImNyb3NzZWQtc3RhclwiLFxuICBcImNzdlwiLFxuICBcImRlbGV0ZUNvbHVtblwiLFxuICBcImRlbGV0ZVJvd1wiLFxuICBcImRpY2UtZ2x5cGhcIixcbiAgXCJkaWNlXCIsXG4gIFwiZG9jdW1lbnRcIixcbiAgXCJkb2N1bWVudHNcIixcbiAgXCJkb3QtbmV0d29ya1wiLFxuICBcImRvdWJsZS1kb3duLWFycm93LWdseXBoXCIsXG4gIFwiZG91YmxlLXVwLWFycm93LWdseXBoXCIsXG4gIFwiZG93bi1hcnJvdy13aXRoLXRhaWxcIixcbiAgXCJkb3duLWNoZXZyb24tZ2x5cGhcIixcbiAgXCJkb3duLWN1cmx5LWFycm93LWdseXBoXCIsXG4gIFwiZHVwbGljYXRlLWdseXBoXCIsXG4gIFwiZW5sYXJnZS1nbHlwaFwiLFxuICBcImVudGVyXCIsXG4gIFwiZXhpdC1mdWxsc2NyZWVuXCIsXG4gIFwiZXhwYW5kLXZlcnRpY2FsbHlcIixcbiAgXCJmaWxlLWV4cGxvcmVyLWdseXBoXCIsXG4gIFwiZmlsbGVkLXBpblwiLFxuICBcImZvcm11bGFcIixcbiAgXCJmb2xkZXJcIixcbiAgXCJmb3J3YXJkLWFycm93XCIsXG4gIFwiZnVsbHNjcmVlblwiLFxuICBcImdlYXJcIixcbiAgXCJnby10by1maWxlXCIsXG4gIFwiZ3JhcGgtZ2x5cGhcIixcbiAgXCJoYXNodGFnXCIsXG4gIFwiaGVhZGluZy1nbHlwaFwiLFxuICBcImhlbHBcIixcbiAgXCJoaWdobGlnaHQtZ2x5cGhcIixcbiAgXCJob3Jpem9udGFsLXNwbGl0XCIsXG4gIFwiaW1hZ2UtZmlsZVwiLFxuICBcImltYWdlLWdseXBoXCIsXG4gIFwiaW1wb3J0LWdseXBoXCIsXG4gIFwiaW5kZW50LWdseXBoXCIsXG4gIFwiaW5mb1wiLFxuICBcImluc2VydENvbHVtblwiLFxuICBcImluc2VydFJvd1wiLFxuICBcImluc3RhbGxcIixcbiAgXCJpdGFsaWMtZ2x5cGhcIixcbiAgXCJrZXlib2FyZC1nbHlwaFwiLFxuICBcImxhbmd1YWdlc1wiLFxuICBcImxlZnQtYXJyb3ctd2l0aC10YWlsXCIsXG4gIFwibGVmdC1hcnJvd1wiLFxuICBcImxlZnQtY2hldnJvbi1nbHlwaFwiLFxuICBcImxpbmVzLW9mLXRleHRcIixcbiAgXCJsaW5rLWdseXBoXCIsXG4gIFwibGlua1wiLFxuICBcImxpbmtzLWNvbWluZy1pblwiLFxuICBcImxpbmtzLWdvaW5nLW91dFwiLFxuICBcImxvZ28tY3J5c3RhbFwiLFxuICBcIm1hZ25pZnlpbmctZ2xhc3NcIixcbiAgXCJtZXJnZS1maWxlcy1nbHlwaFwiLFxuICBcIm1lcmdlLWZpbGVzXCIsXG4gIFwibWljcm9waG9uZS1maWxsZWRcIixcbiAgXCJtaWNyb3Bob25lXCIsXG4gIFwibWludXMtd2l0aC1jaXJjbGVcIixcbiAgXCJtb3ZlQ29sdW1uTGVmdFwiLFxuICBcIm1vdmVDb2x1bW5SaWdodFwiLFxuICBcIm1vdmVSb3dEb3duXCIsXG4gIFwibW92ZVJvd1VwXCIsXG4gIFwibmF2aWdhdGUtZ2x5cGhcIixcbiAgXCJub3RlLWdseXBoXCIsXG4gIFwibnVtYmVyLWxpc3QtZ2x5cGhcIixcbiAgXCJvcGVuLWVsc2V3aGVyZS1nbHlwaFwiLFxuICBcIm9wZW4tdmF1bHRcIixcbiAgXCJwYW5lLWxheW91dFwiLFxuICBcInBhcGVyLXBsYW5lLWdseXBoXCIsXG4gIFwicGFwZXItcGxhbmVcIixcbiAgXCJwYXN0ZS10ZXh0XCIsXG4gIFwicGFzdGVcIixcbiAgXCJwYXVzZWRcIixcbiAgXCJwZGYtZmlsZVwiLFxuICBcInBlbmNpbFwiLFxuICBcInBlcmNlbnQtc2lnbi1nbHlwaFwiLFxuICBcInBpblwiLFxuICBcInBsYXktYXVkaW8tZ2x5cGhcIixcbiAgXCJwbHVzLW1pbnVzLWdseXBoXCIsXG4gIFwicGx1cy13aXRoLWNpcmNsZVwiLFxuICBcInBvcHVwLW9wZW5cIixcbiAgXCJwcmVzZW50YXRpb24tZ2x5cGhcIixcbiAgXCJwcmVzZW50YXRpb25cIixcbiAgXCJwcmljZS10YWctZ2x5cGhcIixcbiAgXCJxdWVzdGlvbi1tYXJrLWdseXBoXCIsXG4gIFwicXVvdGUtZ2x5cGhcIixcbiAgXCJyZWRvLWdseXBoXCIsXG4gIFwicmVzZXRcIixcbiAgXCJyZXN0b3JlLWZpbGUtZ2x5cGhcIixcbiAgXCJyaWdodC1hcnJvdy13aXRoLXRhaWxcIixcbiAgXCJyaWdodC1hcnJvd1wiLFxuICBcInJpZ2h0LWNoZXZyb24tZ2x5cGhcIixcbiAgXCJyaWdodC10cmlhbmdsZVwiLFxuICBcInJ1bi1jb21tYW5kXCIsXG4gIFwic2Npc3NvcnMtZ2x5cGhcIixcbiAgXCJzY2lzc29yc1wiLFxuICBcInNlYXJjaC1nbHlwaFwiLFxuICBcInNlYXJjaFwiLFxuICBcInNlbGVjdC1hbGwtdGV4dFwiLFxuICBcInNoZWV0cy1pbi1ib3hcIixcbiAgXCJzb3J0QXNjXCIsXG4gIFwic29ydERlc2NcIixcbiAgXCJzcHJlYWRzaGVldFwiLFxuICBcInNwbGl0XCIsXG4gIFwic3RhY2tlZC1sZXZlbHNcIixcbiAgXCJzdGFyLWdseXBoXCIsXG4gIFwic3Rhci1saXN0XCIsXG4gIFwic3RhclwiLFxuICBcInN0b3AtYXVkaW8tZ2x5cGhcIixcbiAgXCJzdHJpa2V0aHJvdWdoLWdseXBoXCIsXG4gIFwic3dpdGNoXCIsXG4gIFwic3luYy1zbWFsbFwiLFxuICBcInN5bmNcIixcbiAgXCJ0YWctZ2x5cGhcIixcbiAgXCJ0aHJlZS1ob3Jpem9udGFsLWJhcnNcIixcbiAgXCJ0b21vcnJvdy1nbHlwaFwiLFxuICBcInRyYXNoXCIsXG4gIFwidHdvLWJsYW5rLXBhZ2VzXCIsXG4gIFwidW5kby1nbHlwaFwiLFxuICBcInVuaW5kZW50LWdseXBoXCIsXG4gIFwidXAtYW5kLWRvd24tYXJyb3dzXCIsXG4gIFwidXAtYXJyb3ctd2l0aC10YWlsXCIsXG4gIFwidXAtY2hldnJvbi1nbHlwaFwiLFxuICBcInVwLWN1cmx5LWFycm93LWdseXBoXCIsXG4gIFwidXBwZXJjYXNlLWxvd2VyY2FzZS1hXCIsXG4gIFwidmF1bHRcIixcbiAgXCJ2ZXJ0aWNhbC1zcGxpdFwiLFxuICBcInZlcnRpY2FsLXRocmVlLWRvdHNcIixcbiAgXCJ3b3Jrc3BhY2UtZ2x5cGhcIixcbiAgXCJ3cmVuY2gtc2NyZXdkcml2ZXItZ2x5cGhcIixcbiAgXCJ5ZXN0ZXJkYXktZ2x5cGhcIixcbl07XG4iLCJpbXBvcnQgeyBDb21tYW5kLCBzZXRJY29uLCBGdXp6eU1hdGNoLCBGdXp6eVN1Z2dlc3RNb2RhbCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IGNNZW51UGx1Z2luIGZyb20gXCJtYWluXCI7XG5pbXBvcnQgeyBhcHBJY29ucyB9IGZyb20gXCIuL2FwcEljb25zXCI7XG5cbmNsYXNzIENob29zZUZyb21JY29uTGlzdCBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPHN0cmluZz4ge1xuICBwbHVnaW46IGNNZW51UGx1Z2luO1xuICBjb21tYW5kOiBDb21tYW5kO1xuXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogY01lbnVQbHVnaW4sIGNvbW1hbmQ6IENvbW1hbmQpIHtcbiAgICBzdXBlcihwbHVnaW4uYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLmNvbW1hbmQgPSBjb21tYW5kO1xuICAgIHRoaXMuc2V0UGxhY2Vob2xkZXIoXCJDaG9vc2UgZnJvbSBpY29uIGxpc3RcIik7XG4gIH1cblxuICBnZXRJdGVtcygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIGFwcEljb25zO1xuICB9XG5cbiAgZ2V0SXRlbVRleHQoaXRlbTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gaXRlbTtcbiAgfVxuXG4gIHJlbmRlclN1Z2dlc3Rpb24oaWNvbjogRnV6enlNYXRjaDxzdHJpbmc+LCBpY29uSXRlbTogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBzcGFuID0gY3JlYXRlU3Bhbih7IGNsczogXCJjTWVudUljb25QaWNrXCIgfSk7XG4gICAgaWNvbkl0ZW0uYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgc2V0SWNvbihzcGFuLCBpY29uLml0ZW0pO1xuICAgIHN1cGVyLnJlbmRlclN1Z2dlc3Rpb24oaWNvbiwgaWNvbkl0ZW0pO1xuICB9XG5cbiAgYXN5bmMgb25DaG9vc2VJdGVtKGl0ZW06IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuY29tbWFuZC5pY29uID0gaXRlbTtcbiAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tZW51Q29tbWFuZHMucHVzaCh0aGlzLmNvbW1hbmQpO1xuICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjTWVudS1OZXdDb21tYW5kXCIpKTtcbiAgICB9LCAxMDApO1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYCVjQ29tbWFuZCAnJHt0aGlzLmNvbW1hbmQubmFtZX0nIHdhcyBhZGRlZCB0byBjTWVudWAsXG4gICAgICBcImNvbG9yOiAjMTdmZjc0XCJcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb21tYW5kUGlja2VyIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8Q29tbWFuZD4ge1xuICBjb21tYW5kOiBDb21tYW5kO1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogY01lbnVQbHVnaW4pIHtcbiAgICBzdXBlcihwbHVnaW4uYXBwKTtcbiAgICB0aGlzLmFwcDtcbiAgICB0aGlzLnNldFBsYWNlaG9sZGVyKFwiQ2hvb3NlIGZyb20gY29tbWFuZHMgbGlzdFwiKTtcbiAgfVxuXG4gIGdldEl0ZW1zKCk6IENvbW1hbmRbXSB7XG4gICAgLy9AdHMtaWdub3JlXG4gICAgcmV0dXJuIHRoaXMuYXBwLmNvbW1hbmRzLmxpc3RDb21tYW5kcygpO1xuICB9XG5cbiAgZ2V0SXRlbVRleHQoaXRlbTogQ29tbWFuZCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGl0ZW0ubmFtZTtcbiAgfVxuXG4gIGFzeW5jIG9uQ2hvb3NlSXRlbShpdGVtOiBDb21tYW5kKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKGl0ZW0uaWNvbikge1xuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubWVudUNvbW1hbmRzLnB1c2goaXRlbSk7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBkaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImNNZW51LU5ld0NvbW1hbmRcIikpO1xuICAgICAgfSwgMTAwKTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgJWNDb21tYW5kICcke2l0ZW0ubmFtZX0nIHdhcyBhZGRlZCB0byBjTWVudWAsXG4gICAgICAgIFwiY29sb3I6ICMxN2ZmNzRcIlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IENob29zZUZyb21JY29uTGlzdCh0aGlzLnBsdWdpbiwgaXRlbSkub3BlbigpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgQXBwLCBTZXR0aW5nLCBDb21tYW5kLCBQbHVnaW5TZXR0aW5nVGFiIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgY01lbnVQbHVnaW4gZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IENvbW1hbmRQaWNrZXIgfSBmcm9tIFwic3JjL21vZGFsc1wiO1xuZXhwb3J0IGNvbnN0IEFQUEVORF9NRVRIT0RTID0gW1wiYm9keVwiLCBcIndvcmtzcGFjZVwiXTtcbmV4cG9ydCBjb25zdCBBRVNUSEVUSUNfU1RZTEVTID0gW1wiZ2xhc3NcIiwgXCJkZWZhdWx0XCJdO1xuXG5leHBvcnQgaW50ZXJmYWNlIGNNZW51U2V0dGluZ3Mge1xuICBhZXN0aGV0aWNTdHlsZTogc3RyaW5nO1xuICBtZW51Q29tbWFuZHM6IENvbW1hbmRbXTtcbiAgZ3JpZEl0ZW1zOiBzdHJpbmc7XG4gIGFwcGVuZE1ldGhvZDogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogY01lbnVTZXR0aW5ncyA9IHtcbiAgYWVzdGhldGljU3R5bGU6IFwiZGVmYXVsdFwiLFxuICBtZW51Q29tbWFuZHM6IFtcbiAgICB7XG4gICAgICBpZDogXCJlZGl0b3I6dG9nZ2xlLWJvbGRcIixcbiAgICAgIG5hbWU6IFwiVG9nZ2xlIGJvbGRcIixcbiAgICAgIGljb246IFwiYm9sZC1nbHlwaFwiLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFwiZWRpdG9yOnRvZ2dsZS1pdGFsaWNzXCIsXG4gICAgICBuYW1lOiBcIlRvZ2dsZSBpdGFsaWNzXCIsXG4gICAgICBpY29uOiBcIml0YWxpYy1nbHlwaFwiLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFwiZWRpdG9yOnRvZ2dsZS1zdHJpa2V0aHJvdWdoXCIsXG4gICAgICBuYW1lOiBcIlRvZ2dsZSBzdHJpa2V0aHJvdWdoXCIsXG4gICAgICBpY29uOiBcInN0cmlrZXRocm91Z2gtZ2x5cGhcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBcImNtZW51LXBsdWdpbjp1bmRlcmxpbmVcIixcbiAgICAgIG5hbWU6IFwiY01lbnU6IFRvZ2dsZSBVbmRlcmxpbmVcIixcbiAgICAgIGljb246IFwidW5kZXJsaW5lLWdseXBoXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogXCJjbWVudS1wbHVnaW46c3VwZXJzY3JpcHRcIixcbiAgICAgIG5hbWU6IFwiY01lbnU6IFRvZ2dsZSBTdXBlcnNjcmlwdFwiLFxuICAgICAgaWNvbjogXCJzdXBlcnNjcmlwdC1nbHlwaFwiLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFwiY21lbnUtcGx1Z2luOnN1YnNjcmlwdFwiLFxuICAgICAgbmFtZTogXCJjTWVudTogVG9nZ2xlIFN1YnNjcmlwdFwiLFxuICAgICAgaWNvbjogXCJzdWJzY3JpcHQtZ2x5cGhcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBcImVkaXRvcjp0b2dnbGUtY29kZVwiLFxuICAgICAgbmFtZTogXCJUb2dnbGUgY29kZVwiLFxuICAgICAgaWNvbjogXCJjb2RlLWdseXBoXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogXCJjbWVudS1wbHVnaW46Y29kZWJsb2NrXCIsXG4gICAgICBuYW1lOiBcImNNZW51OiBUb2dnbGUgY29kZWJsb2NrXCIsXG4gICAgICBpY29uOiBcImNvZGVibG9jay1nbHlwaFwiLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFwiZWRpdG9yOnRvZ2dsZS1ibG9ja3F1b3RlXCIsXG4gICAgICBuYW1lOiBcIlRvZ2dsZSBibG9ja3F1b3RlXCIsXG4gICAgICBpY29uOiBcInF1b3RlLWdseXBoXCIsXG4gICAgfSxcbiAgXSxcbiAgZ3JpZEl0ZW1zOiBcIjFmciAxZnIgMWZyIDFmciAxZnIgMWZyIDFmciAxZnIgMWZyXCIsXG4gIGFwcGVuZE1ldGhvZDogXCJ3b3Jrc3BhY2VcIixcbn07XG5cbmV4cG9ydCBjbGFzcyBjTWVudVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgcGx1Z2luOiBjTWVudVBsdWdpbjtcbiAgYXBwZW5kTWV0aG9kOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogY01lbnVQbHVnaW4pIHtcbiAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgYWRkRXZlbnRMaXN0ZW5lcihcImNNZW51LU5ld0NvbW1hbmRcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgfSk7XG4gIH1cblxuICBkaXNwbGF5KCk6IHZvaWQge1xuICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJjTWVudSBTZXR0aW5nc1wiIH0pO1xuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJDdXN0b21pemUgY01lbnUgYXBwZW5kIG1ldGhvZC5cIilcbiAgICAgIC5zZXREZXNjKFwiQ2hvb3NlIHdoZXJlIGNNZW51IHdpbGwgYXBwZW5kIHVwb24gcmVnZW5lcmF0aW9uLlwiKVxuICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuICAgICAgICBsZXQgbWV0aG9kczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgICAgICBBUFBFTkRfTUVUSE9EUy5tYXAoKG1ldGhvZCkgPT4gKG1ldGhvZHNbbWV0aG9kXSA9IG1ldGhvZCkpO1xuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb25zKG1ldGhvZHMpO1xuICAgICAgICBkcm9wZG93blxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcHBlbmRNZXRob2QpXG4gICAgICAgICAgLm9uQ2hhbmdlKChhcHBlbmRNZXRob2QpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFwcGVuZE1ldGhvZCA9IGFwcGVuZE1ldGhvZDtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIkN1c3RvbWl6ZSBjTWVudSBhZXN0aGV0aWMuXCIpXG4gICAgICAuc2V0RGVzYyhcIkNob29zZSBiZXR3ZWVuIGEgZ2xhc3MgbW9ycGhpc20gYW5kIGRlZmF1bHQgc3R5bGUgZm9yIGNNZW51LlwiKVxuICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuICAgICAgICBsZXQgYWVzdGhldGljczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgICAgICBBRVNUSEVUSUNfU1RZTEVTLm1hcChcbiAgICAgICAgICAoYWVzdGhldGljKSA9PiAoYWVzdGhldGljc1thZXN0aGV0aWNdID0gYWVzdGhldGljKVxuICAgICAgICApO1xuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb25zKGFlc3RoZXRpY3MpO1xuICAgICAgICBkcm9wZG93blxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hZXN0aGV0aWNTdHlsZSlcbiAgICAgICAgICAub25DaGFuZ2UoKGFlc3RoZXRpY1N0eWxlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hZXN0aGV0aWNTdHlsZSA9IGFlc3RoZXRpY1N0eWxlO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiQ3VzdG9taXplIGNNZW51IENvbW1hbmRzXCIpXG4gICAgICAuc2V0RGVzYyhcbiAgICAgICAgXCJBZGQgYSBjb21tYW5kIGZyb20gT2JzaWRpYW4ncyBjb21tYW5kcyBsaWJyYXJ5IHRvIGNNZW51LiBCeSBkZWZhdWx0LCB5b3VyIGNvbW1hbmRzIGFyZSBzZXQgdG86IFRvZ2dsZSBib2xkLCBUb2dnbGUgaXRhbGljcywgVG9nZ2xlIHN0cmlrZXRocm91Z2gsIGNNZW51OiBUb2dnbGUgVW5kZXJsaW5lLCBjTWVudTogVG9nZ2xlIFN1cGVyc2NyaXB0LCBjTWVudTogVG9nZ2xlIFN1YnNjcmlwdCwgVG9nZ2xlIGNvZGUsIGNNZW51OiBUb2dnbGUgY29kZWJsb2NrLCBhbmQgVG9nZ2xlIGJsb2NrcXVvdGUuXCJcbiAgICAgIClcbiAgICAgIC5hZGRCdXR0b24oKGFkZEJ1dHRvbikgPT4ge1xuICAgICAgICBhZGRCdXR0b25cbiAgICAgICAgICAuc2V0SWNvbihcImNNZW51QWRkXCIpXG4gICAgICAgICAgLnNldENsYXNzKFwiY01lbnVTZXR0aW5nc0J1dHRvblwiKVxuICAgICAgICAgIC5zZXRDbGFzcyhcImNNZW51U2V0dGluZ3NCdXR0b25BZGRcIilcbiAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICBuZXcgQ29tbWFuZFBpY2tlcih0aGlzLnBsdWdpbikub3BlbigpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubWVudUNvbW1hbmRzLmZvckVhY2goKG5ld0NvbW1hbmQpID0+IHtcbiAgICAgIGNvbnN0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUobmV3Q29tbWFuZC5uYW1lKVxuICAgICAgICAuYWRkQnV0dG9uKChkZWxldGVCdXR0b24pID0+IHtcbiAgICAgICAgICBkZWxldGVCdXR0b25cbiAgICAgICAgICAgIC5zZXRJY29uKFwiY01lbnVEZWxldGVcIilcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcImNNZW51U2V0dGluZ3NCdXR0b25cIilcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcImNNZW51U2V0dGluZ3NCdXR0b25EZWxldGVcIilcbiAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubWVudUNvbW1hbmRzLnJlbW92ZShuZXdDb21tYW5kKTtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgJWNDb21tYW5kICcke25ld0NvbW1hbmQubmFtZX0nIHdhcyByZW1vdmVkIGZyb20gY01lbnVgLFxuICAgICAgICAgICAgICAgIFwiY29sb3I6ICNmZjIzNjBcIlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgc2V0dGluZy5uYW1lRWw7XG4gICAgfSk7XG5cbiAgICBjb25zdCBkaXYgPSBjb250YWluZXJFbC5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICBjbHM6IFwiY0RvbmF0aW9uU2VjdGlvblwiLFxuICAgIH0pO1xuXG4gICAgY29uc3QgY3JlZGl0ID0gY3JlYXRlRWwoXCJwXCIpO1xuICAgIGNvbnN0IGRvbmF0ZVRleHQgPSBjcmVhdGVFbChcInBcIik7XG4gICAgZG9uYXRlVGV4dC5hcHBlbmRUZXh0KFxuICAgICAgXCJJZiB5b3UgbGlrZSB0aGlzIFBsdWdpbiBhbmQgYXJlIGNvbnNpZGVyaW5nIGRvbmF0aW5nIHRvIHN1cHBvcnQgY29udGludWVkIGRldmVsb3BtZW50LCB1c2UgdGhlIGJ1dHRvbiBiZWxvdyFcIlxuICAgICk7XG4gICAgY3JlZGl0LmFwcGVuZFRleHQoXCJDcmVhdGVkIHdpdGgg4p2k77iPIGJ5IENoZXRhY2hpXCIpO1xuICAgIGNyZWRpdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKVwiKTtcbiAgICBkaXYuYXBwZW5kQ2hpbGQoZG9uYXRlVGV4dCk7XG4gICAgZGl2LmFwcGVuZENoaWxkKGNyZWRpdCk7XG5cbiAgICBkaXYuYXBwZW5kQ2hpbGQoXG4gICAgICBjcmVhdGVEb25hdGVCdXR0b24oXCJodHRwczovL3d3dy5idXltZWFjb2ZmZWUuY29tL2NoZXRhY2hpXCIpXG4gICAgKTtcbiAgfVxuICBzYXZlKCkge1xuICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICB9XG59XG5cbmNvbnN0IGNyZWF0ZURvbmF0ZUJ1dHRvbiA9IChsaW5rOiBzdHJpbmcpOiBIVE1MRWxlbWVudCA9PiB7XG4gIGNvbnN0IGEgPSBjcmVhdGVFbChcImFcIik7XG4gIGEuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBsaW5rKTtcbiAgYS5hZGRDbGFzcyhcImJ1eW1lYWNvZmZlZS1jaGV0YWNoaS1pbWdcIik7XG4gIGEuaW5uZXJIVE1MID0gYDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWcuYnV5bWVhY29mZmVlLmNvbS9idXR0b24tYXBpLz90ZXh0PUJ1eSBtZSBhIGNvZmZlZSZlbW9qaT0mc2x1Zz1jaGV0YWNoaSZidXR0b25fY29sb3VyPWUzZTdlZiZmb250X2NvbG91cj0yNjI2MjYmZm9udF9mYW1pbHk9SW50ZXImb3V0bGluZV9jb2xvdXI9MjYyNjI2JmNvZmZlZV9jb2xvdXI9ZmYwMDAwXCIgaGVpZ2h0PVwiNDJweFwiPmA7XG4gIHJldHVybiBhO1xufTtcbiIsImltcG9ydCB7IFBsdWdpbiwgTWFya2Rvd25WaWV3IH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCBhZGRJY29ucyBmcm9tIFwiLi9zcmMvY3VzdG9tSWNvbnNcIjtcclxuaW1wb3J0IHsgc2VsZkRlc3RydWN0LCBjTWVudVBvcG92ZXIgfSBmcm9tIFwic3JjL21lbnVcIjtcclxuaW1wb3J0IHsgY01lbnVTZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUywgY01lbnVTZXR0aW5nVGFiIH0gZnJvbSBcInNyYy9zZXR0aW5nc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgY01lbnVQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG4gIHNldHRpbmdzOiBjTWVudVNldHRpbmdzO1xyXG5cclxuICBhc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zb2xlLmxvZyhcImNNZW51IHZcIiArIHRoaXMubWFuaWZlc3QudmVyc2lvbiArIFwiIGxvYWRlZFwiKTtcclxuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcbiAgICBhZGRJY29ucygpO1xyXG5cclxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgIGlkOiBcInVuZGVybGluZVwiLFxyXG4gICAgICBuYW1lOiBcIlRvZ2dsZSBVbmRlcmxpbmVcIixcclxuICAgICAgaWNvbjogXCJ1bmRlcmxpbmUtZ2x5cGhcIixcclxuICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuICAgICAgICB2YXIgYWN0aXZlTGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcbiAgICAgICAgaWYgKGFjdGl2ZUxlYWYpIHtcclxuICAgICAgICAgIHZhciB2aWV3ID0gYWN0aXZlTGVhZjtcclxuICAgICAgICAgIHZhciBlZGl0b3IgPSB2aWV3LmVkaXRvcjtcclxuICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICBpZiAoc2VsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKFwiPHU+XCIgKyBzZWxlY3Rpb24gKyBcIjwvdT5cIik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6IFwic3VwZXJzY3JpcHRcIixcclxuICAgICAgbmFtZTogXCJUb2dnbGUgU3VwZXJzY3JpcHRcIixcclxuICAgICAgaWNvbjogXCJzdXBlcnNjcmlwdC1nbHlwaFwiLFxyXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHZhciBhY3RpdmVMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgICAgICBpZiAoYWN0aXZlTGVhZikge1xyXG4gICAgICAgICAgdmFyIHZpZXcgPSBhY3RpdmVMZWFmO1xyXG4gICAgICAgICAgdmFyIGVkaXRvciA9IHZpZXcuZWRpdG9yO1xyXG4gICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICAgIGlmIChzZWxlY3Rpb24pIHtcclxuICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oXCI8c3VwPlwiICsgc2VsZWN0aW9uICsgXCI8L3N1cD5cIik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6IFwic3Vic2NyaXB0XCIsXHJcbiAgICAgIG5hbWU6IFwiVG9nZ2xlIFN1YnNjcmlwdFwiLFxyXG4gICAgICBpY29uOiBcInN1YnNjcmlwdC1nbHlwaFwiLFxyXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHZhciBhY3RpdmVMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgICAgICBpZiAoYWN0aXZlTGVhZikge1xyXG4gICAgICAgICAgdmFyIHZpZXcgPSBhY3RpdmVMZWFmO1xyXG4gICAgICAgICAgdmFyIGVkaXRvciA9IHZpZXcuZWRpdG9yO1xyXG4gICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICAgIGlmIChzZWxlY3Rpb24pIHtcclxuICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oXCI8c3ViPlwiICsgc2VsZWN0aW9uICsgXCI8L3N1Yj5cIik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6IFwiY29kZWJsb2NrXCIsXHJcbiAgICAgIG5hbWU6IFwiVG9nZ2xlIGNvZGVibG9ja1wiLFxyXG4gICAgICBpY29uOiBcImNvZGVibG9jay1nbHlwaFwiLFxyXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHZhciBhY3RpdmVMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgICAgICBpZiAoYWN0aXZlTGVhZikge1xyXG4gICAgICAgICAgdmFyIHZpZXcgPSBhY3RpdmVMZWFmO1xyXG4gICAgICAgICAgdmFyIGVkaXRvciA9IHZpZXcuZWRpdG9yO1xyXG4gICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICAgIGlmIChzZWxlY3Rpb24pIHtcclxuICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oXCJcXG5gYGBcXG5cIiArIHNlbGVjdGlvbiArIFwiXFxuYGBgXFxuXCIpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgY01lbnVTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImFjdGl2ZS1sZWFmLWNoYW5nZVwiLCB0aGlzLmhhbmRsZWNNZW51KVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIG9udW5sb2FkKCk6IHZvaWQge1xyXG4gICAgc2VsZkRlc3RydWN0KCk7XHJcbiAgICBjb25zb2xlLmxvZyhcImNNZW51IHVubG9hZGVkXCIpO1xyXG4gICAgdGhpcy5hcHAud29ya3NwYWNlLm9mZihcImFjdGl2ZS1sZWFmLWNoYW5nZVwiLCB0aGlzLmhhbmRsZWNNZW51KTtcclxuICB9XHJcblxyXG4gIGhhbmRsZWNNZW51ID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgY01lbnVQb3BvdmVyKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKTtcclxuICB9O1xyXG5cclxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJhZGRJY29uIiwiQnV0dG9uQ29tcG9uZW50IiwiTWFya2Rvd25WaWV3IiwiRnV6enlTdWdnZXN0TW9kYWwiLCJzZXRJY29uIiwiUGx1Z2luU2V0dGluZ1RhYiIsIlNldHRpbmciLCJQbHVnaW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF1REE7QUFDTyxTQUFTLFNBQVMsQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUU7QUFDN0QsSUFBSSxTQUFTLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxPQUFPLEtBQUssWUFBWSxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLFVBQVUsT0FBTyxFQUFFLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7QUFDaEgsSUFBSSxPQUFPLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxPQUFPLENBQUMsRUFBRSxVQUFVLE9BQU8sRUFBRSxNQUFNLEVBQUU7QUFDL0QsUUFBUSxTQUFTLFNBQVMsQ0FBQyxLQUFLLEVBQUUsRUFB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
